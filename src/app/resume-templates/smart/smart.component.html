<div class="smart-template">
  <app-a4-wrapper>
    <app-smart-template-header
      [data]="resume.head"
      (changeHeadInfo)="handleChangeHeadInfo($event)"
    ></app-smart-template-header>
    <app-smart-contacts-list
      [data]="resume.contacts"
      (changeContacts)="handleChangeContacts($event)"
    ></app-smart-contacts-list>
    <div class="smart-template__body">
      <div class="smart-template__body--left">
        <ng-container
          *ngFor="
            let key of mainDispozition;
            let first = first;
            let last = last;
            let idx = index
          "
        >
          <app-info-block-wrapper
            [contextForHimself]="infoBlockContent"
            [isFirst]="first"
            [isLast]="last"
            (moveBlockUp)="moveBlockUp(idx, 'mainZone')"
            (moveBlockDown)="moveBlockDown(idx, 'mainZone')"
            (deleteBlock)="deleteBlock(idx, 'mainZone')"
          >
            <ng-template #infoBlockContent let-isEditMode="isEditMode">
              <app-info-block
                [infoBlock]="infoBlocks[key]"
                [isEditMode]="isEditMode"
                (blockChange)="handleSetBlockChanges($event, key)"
              ></app-info-block>
            </ng-template>
          </app-info-block-wrapper>
        </ng-container>
      </div>

      <div class="smart-template__body--right">
        <ng-container
          *ngFor="
            let key of rightDispozition;
            let first = first;
            let last = last;
            let idx = index
          "
        >
          <app-info-block-wrapper
            [contextForHimself]="infoBlockContent"
            [isFirst]="first"
            [isLast]="last"
            (moveBlockUp)="moveBlockUp(idx, 'rightZone')"
            (moveBlockDown)="moveBlockDown(idx, 'rightZone')"
            (deleteBlock)="deleteBlock(idx, 'rightZone')"
          >
            <ng-template #infoBlockContent let-isEditMode="isEditMode">
              <app-info-block
                [infoBlock]="infoBlocks[key]"
                [isEditMode]="isEditMode"
                (blockChange)="handleSetBlockChanges($event, key)"
              ></app-info-block>
            </ng-template>
          </app-info-block-wrapper>
        </ng-container>
      </div>
    </div>
  </app-a4-wrapper>
</div>
